language: java
jdk:
  - openjdk11
services:
  - postgresql
cache:
  directories:
    - $HOME/.m2
before_script:
  - psql -c "CREATE USER $USERNAME WITH PASSWORD '$PASSWORD';" -U postgres
  - psql -c "ALTER ROLE $USERNAME SUPERUSER"
  - psql -c "CREATE DATABASE $DB;" -U postgres
install: true
script:
  - "mvn clean flyway:migrate jooq-codegen:generate"
